<!DOCTYPE html>
<html lang="en-US">
<head>
  <meta charset="utf-8">
  <script src="https://ajax.googleapis.com/ajax/libs/jquery/1.11.3/jquery.min.js"></script>
</head>
<body>
<form id="operaciones" method="POST" action="operar">
  <%= csrf_token_field %>

  <label>Seleccione la operacion a realizar</label>
  <select id="lista" name="operacion" onchange="mostrar(this)">
    <option selected="" value="">- Select -</option>
    <option value="sumar">Sumar</option>
    <option value="restar">Restar</option>
    <option value="promedio">Promedio</option>
  </select>

  <div class="clase_sumores">
    <label>Ingrese operandos:</label>
    <input id="op1" type="number" name="operando1"/>
    <input id="op2" type="number" name="operando2"/>
    <input type="submit" id="operar" value="Operar"/>
  </div>

  <div class="clase_promedio">
    <label>Ingrese los numeros a promediar de a uno: </label>
    <input id="num" type="number" name="numero"/>
    <input id="lista_num" name="lista_numeros"/>
    <button id="agregar_num" type="button">Agregar valor a promediar</button>
    <input type="submit" id="promediar" value="Promediar"/>
  </div>

</form>

<form id="op_resetear" method="POST">
  <%= csrf_token_field %>
  <input type="submit" id="resetear" value="Resetear Memoria" formaction="resetear"/>
  <input type="submit" id="consultar_operaciones" value="Consultar Cantidad Operaciones Realizadas" formaction="consultar"/>
</form>

<div id="resultado"><%= @resultado %></div>

<script>

    $('.clase_sumores').hide();
    $('.clase_promedio').hide();

    function mostrar(arg) {
        if (arg.value == "sumar" || arg.value == "restar") {
            $('.clase_sumores').show();
            $('.clase_promedio').hide();
        }
        else {
            $('.clase_promedio').show();
            $('.clase_sumores').hide();
        }
    }

    $('#agregar_num').click(function () {
        var elem = $('#lista_num');
        var valor_nuevo = $('#num').val();
        var contenido = $(elem).val();

        if((contenido == '') && (valor_nuevo != '')) {
            $(elem).val(valor_nuevo)
        }
        else if(valor_nuevo != '') {
            $(elem).val(contenido + ', ' + valor_nuevo);
        }
        $('#num').val('');
    })
</script>

</body>
</html>
